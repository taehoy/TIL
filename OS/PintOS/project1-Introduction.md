**PintOS Project 1: 스레드 및 동기화 개념 정리**

PintOS Project 1에서는 **스레드 관리 및 동기화 문제 해결**을 중심으로 운영체제의 핵심 개념을 다룹니다. 멀티스레딩 환경에서 발생하는 문제를 해결하고, 실무에서도 활용할 수 있는 동기화 기법을 익히는 것이 목표입니다.

---

## 1. 프로젝트 개요

### 무엇을 배우는가?

PintOS Project 1을 통해 운영체제의 **스레드(thread) 관리**와 **동기화(synchronization)** 기법을 익힙니다. 주요 학습 개념은 다음과 같습니다.

- **스레드 생성과 스케줄링**: 운영체제에서 스레드가 어떻게 생성되고 실행되는지 이해.
- **우선순위 기반 스케줄링**: 스레드의 우선순위를 고려한 CPU 스케줄링 구현.
- **경쟁 상태(Race Condition) 해결**: 공유 자원 접근 시 발생할 수 있는 문제를 해결하는 동기화 기법.
- **세마포어, 락, 조건 변수** 등을 활용한 동기화 메커니즘 이해.

### 왜 배우는가?

현대 운영체제 및 실무 애플리케이션은 대부분 **멀티스레딩 환경**에서 동작합니다. 그러나 여러 스레드가 하나의 자원에 접근하면 **데이터 불일치, 교착 상태(Deadlock), 우선순위 역전(Priority Inversion)** 등의 문제가 발생할 수 있습니다. 따라서 안정적인 시스템을 구축하기 위해 스레드 동기화 기법을 반드시 익혀야 합니다.

### 어디에, 어떻게 쓰이는가?

- **운영체제 커널 개발**: 스레드 스케줄링 및 동기화 알고리즘 최적화.
- **고성능 멀티스레드 애플리케이션**: 게임 서버, 데이터베이스 엔진, 네트워크 프로그래밍 등.
- **실시간 시스템**: 자동차 제어 시스템, 임베디드 OS 등에서 우선순위 기반 스케줄링 필수.

---

## 2. 스레드 관리 및 스케줄링

### 스레드 생성 및 실행 흐름

PintOS의 `thread_create()` 함수를 통해 새로운 스레드를 생성하고, 이를 실행 큐에 추가하여 운영체제가 스케줄링합니다.

1. **스레드 생성**: `thread_create()` 호출 시, 새로운 스레드를 초기화하고 실행 큐에 추가.
2. **스케줄러 실행**: 현재 실행 중인 스레드가 CPU를 양보하면, 가장 높은 우선순위를 가진 스레드가 실행됨.
3. **컨텍스트 스위칭**: 실행 중인 스레드가 다른 스레드로 교체됨.

### 우선순위 기반 스케줄링

기본적으로 PintOS는 **Round-Robin 스케줄링**을 사용하지만, **우선순위 기반 스케줄링(priority scheduling)**을 구현해야 합니다.

- **높은 우선순위 스레드가 먼저 실행됨.**
- **우선순위 역전(priority inversion) 문제 발생 가능** → 이를 해결하기 위해 **Priority Donation(우선순위 기부)** 기법 사용.

### 우선순위 역전(Priority Inversion)과 해결책

- **문제점**: 낮은 우선순위 스레드가 높은 우선순위 스레드를 블로킹할 경우 발생.
- **해결책**: **Priority Donation**을 사용하여 높은 우선순위 스레드가 낮은 우선순위 스레드에 우선순위를 일시적으로 기부하도록 구현.

---

## 3. 동기화 문제 해결

### 경쟁 상태(Race Condition)란?

경쟁 상태란 **여러 스레드가 동시에 공유 자원에 접근하여 데이터 불일치가 발생하는 문제**입니다.

### 해결 방법

1. **세마포어(Semaphore)**: `down()`과 `up()` 연산을 사용하여 한 번에 하나의 스레드만 자원에 접근할 수 있도록 제어.
2. **락(Lock)**: 특정 자원을 배타적으로 사용할 수 있도록 보호.
3. **조건 변수(Condition Variable)**: 특정 조건이 만족될 때까지 스레드를 대기하도록 설정.

### 동기화 기법의 실무 활용

- **멀티스레드 웹 서버**: 동시 요청을 처리할 때 데이터 정합성을 유지하기 위해 사용.
- **데이터베이스 트랜잭션 처리**: 여러 클라이언트가 동일한 데이터를 수정할 때 충돌 방지.
- **네트워크 프로그래밍**: 여러 클라이언트가 동일한 리소스를 요청할 때 동기화 필요.

---

## 4. 프로젝트 수행 시 고려해야 할 점

### 락과 세마포어의 차이점 이해 필수

- **락(Lock)**: 하나의 스레드만 자원에 접근할 수 있도록 보장.
- **세마포어(Semaphore)**: 여러 개의 스레드가 접근 가능하도록 제어 가능.

---

## 5. 마무리

PintOS Project 1은 **운영체제의 멀티스레딩 및 동기화 문제를 실습할 수 있는 핵심 프로젝트**입니다.

특히, **우선순위 기반 스케줄링과 동기화 기법은 서버, 네트워크 개발에서도 필수적인 개념**입니다. 

본격적으로 코드를 구현하기위해 **Alarm Clock**으로 넘어갑니다.